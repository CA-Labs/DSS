/*! ModaClouds-DSS - v0.0.1 - author: Jacek Dominiak - 2014-06-30 */
$("#dssSlides").carousel("pause",{wrap:!1}).on("slid.bs.carousel",function(){var a=$(".topMenu"),b=$(this).find(".active"),c=$(".sticky-bottom");a.find("blockquote p").removeClass("active"),b.hasClass("assets-slide")?(a.find(".assets-slide blockquote p").addClass("active"),c.find(".slide-next").prop("disabled",!1),c.find(".slide-prev").prop("disabled",!0)):b.hasClass("risks-slide")?(a.find(".risks-slide blockquote p").addClass("active"),c.find(".slide-next").prop("disabled",!1),c.find(".slide-prev").prop("disabled",!1)):b.hasClass("requirements-slide")?(a.find(".requirements-slide blockquote p").addClass("active"),c.find(".slide-next").prop("disabled",!1),c.find(".slide-prev").prop("disabled",!1)):(a.find(".services-slide blockquote p").addClass("active"),c.find(".slide-next").prop("disabled",!0),c.find(".slide-prev").prop("disabled",!1))});var dssApp=angular.module("dssApp",["ngStorage"]);dssApp.controller("assetsController",function(a,b,c,d,e){a.asset="",b.assetsSelected=e.assetsSelected||[],a.description="",a.updateDescription=function(b){a.asset.description=b.description},a.$watch("assetsSelected",function(a){e.assetsSelected=a;var f=d.selectAttributeFromObjects(a,"name"),g=[];angular.forEach(f,function(a){g.push({attribute:"name",operator:"=",value:a})});var h={columns:"expand(both())",conditions:{WHEREOR:g}};c.getMatching("Assets",h,function(a){b.risks=a})},!0),c.getMatching("Assets","",function(b){a.assets=b})}),dssApp.controller("BaseController",function(){});var config={http:{beProto:"http",beHost:"localhost",bePort:"3003"}};dssApp.factory("orientdbFactory",function(a){var b={},c=config.http.beProto+"://"+config.http.beHost+":"+config.http.bePort+"/";return b.getMatching=function(b,d,e){a({url:c+"query/"+b,method:"GET",params:d}).success(e)},b}),dssApp.factory("helper",function(){var a={};return a.selectAttributeFromObjects=function(a,b){var c=[];return angular.forEach(a,function(a){this.push(a[b])},c),c},a}),dssApp.filter("capitalize",function(){return function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),dssApp.filter("replaceSpacesWithDash",function(){return function(a){return a.replace(/\ /g,"_")}}),dssApp.filter("replaceDotWithDash",function(){return function(a){return a.replace(/\./g,"_")}}),dssApp.filter("replaceDashWithSpace",function(){return function(a){return a.replace(/_/g," ")}}),dssApp.filter("replaceDashWithDot",function(){return function(a){return a.replace(/_/g,".")}}),dssApp.filter("unique",function(){return function(a,b){var c,d;return b===!1?a:((b||angular.isUndefined(b))&&angular.isArray(a)&&(d=[],c=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a},angular.forEach(a,function(b){var e,f,g=!1;for(e=0,f=d.length;f>e;e++){var h=d[e];if(angular.equals(c(h),c(b))){g=!0;break}}g||d.push(b),a=d})),a)}}),dssApp.controller("mainController",function(a,b,c,d){a.clearSelection=function(){d.assetsSelected=b.assetsSelected=[],d.risksSelected=b.risksSelected=[],d.requirementsSelected=b.requirementsSelected=[]},a.saveSessionFile=function(a){var b=angular.element(a.target);b.attr({download:"DSS_Session.json",href:"data:application/json;charset=utf-8,"+encodeURI(JSON.stringify(d)),target:"_blank"})},a.uploadSessionFile=function(){$("#uploadSessionFile").trigger("click")},a.loadLocalSessionContent=function(a){if(dssApp.isJSON(a)){var c=JSON.parse(a);d.assetsSelected=b.assetsSelected=c.assetsSelected,d.risksSelected=b.risksSelected=c.risksSelected,d.requirementsSelected=b.requirementsSelected=c.requirementsSelected}}}),dssApp.directive("onReadFile",function(a){return{restrict:"A",scope:!1,link:function(b,c,d){var e=a(d.onReadFile);c.on("change",function(a){var c=new FileReader;c.onload=function(a){b.$apply(function(){e(b,{$fileContent:a.target.result})})},c.readAsText((a.srcElement||a.target).files[0])})}}}),dssApp.isJSON=function(a){if("string"==typeof a){try{JSON.parse(a)}catch(b){return!1}return!0}return!1},dssApp.controller("requirementsController",function(a,b,c,d){b.requirementsSelected=d.requirementsSelected||[],a.requirement="",a.$watch("requirementsSelected",function(a){d.requirementsSelected=a})}),dssApp.directive("reqInput",function(){return{restrict:"E",replace:!0,link:function(a,b){var c,d,e;return c=a.$eval("{"+a.item.attributes+"}"),d=c.placeholder||"",e=c.type||"text",b.html('<label for="'+a.item.name+'">'+a.item.name+' <span data-tooltip class="has-tip tip-top" title="'+a.item.definition+'"><i class="fi-lightbulb"></i></span></label><input name="'+a.item.linkName+'" type="'+e+'" class="large-12 columns query" placeholder="'+d+'">'),b.bind("change",function(){return a.change()})}}}),dssApp.directive("reqRadio",function(){return{restrict:"E",replace:!0,link:function(a,b){var c;return c=a.$eval("{"+a.item.attributes+"}"),b.html("<label>"+a.item.name+'</label><label class="switch-light well" onclick=""><input type="checkbox"/><span><span>'+c[0]+"</span><span>"+c[1]+'</span></span><a class="btn btn-success"></a></label>'),b.bind("click",function(){return a.change()})}}}),dssApp.directive("reqSelect",function(){return{restrict:"E",replace:!0,link:function(a,b){var c,d;return c=a.$eval("{"+a.item.options+"}"),d='<option value="none">-- select --</option>',angular.forEach(c,function(a,b){d=d+'<option value="'+b+'">'+a+"</option>"}),b.html('<label for="'+a.item.name+'">'+a.item.name+' <span data-tooltip class="has-tip tip-top" title="'+a.item.name+'"><i class="fi-lightbulb"></i></span></label><select name="'+a.item.linkName+'" class="query form-control form">'+d+"</select>"),b.bind("change",function(){return a.change()})}}}),dssApp.directive("reqSlider",function(){return{restrict:"E",replace:!0,link:function(a,b){var c;return c=a.$eval("{"+a.item.attributes+"}"),b.html('        <label style="margin-bottom: 5px;" class="def-tip" data-container="body" data-toggle="popover" data-placement="right" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">'+a.item.name+'<span title="'+a.item.definition+'"         <i class="fi-lightbulb"></i></span></label>        <span class="label secondary radius right requirementValue">-</span>        <div class="row"><div class="col-lg-6"><small>Likelihood: </small><div style="width: 80%; margin-bottom: 15px;" class="noUiSlider"></div></div><div class="col-lg-6"><small>Consequence :</small><div style="width: 80%; margin-bottom: 15px;" class="noUiSlider"></div></div></div>      '),$(".def-tip").popover({toggle:"hover"}),b.find("div.noUiSlider").noUiSlider({range:{min:0,max:10},start:c.start||0,step:c.step||1,handles:c.handles||1,slide:function(){return $(this).prev("span.requirementValue").text($(this).val())}})}}}),dssApp.controller("risksController",function(a,b,c,d,e){a.risk="",b.risksSelected=e.risksSelected||[],a.$watch("risksSelected",function(a){e.risksSelected=a;var f=d.selectAttributeFromObjects(a,"name"),g=[];angular.forEach(f,function(a){g.push({attribute:"name",operator:"=",value:a})});var h={columns:"expand(out())",conditions:{WHEREOR:g}};c.getMatching("Risks",h,function(a){b.requirements=a})},!0)});
//# sourceMappingURL=app.min.map