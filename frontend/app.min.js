/*! modaclouds-dss - v0.0.1 - author: Jacek Dominiak - 2014-07-28 */
$("#dssSlides").carousel("pause",{wrap:!1}).on("slid.bs.carousel",function(){var a=$(".topMenu"),b=$(this).find(".active"),c=$(".sticky-bottom"),d=c.find(".slide-services");a.find("blockquote p").removeClass("active"),b.hasClass("bsoia-slide")?(a.find(".bsoia-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!0),c.find(".slide-next").prop("disabled",!1),c.find(".slide-next").css("display","inline"),d.css("display","none")):b.hasClass("toia-slide")?(a.find(".toia-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!1),c.find(".slide-next").prop("disabled",!1),c.find(".slide-next").css("display","inline"),d.css("display","none")):b.hasClass("ta-slide")?(a.find(".ta-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!1),c.find(".slide-next").prop("disabled",!1),c.find(".slide-next").css("display","inline"),d.css("display","none")):b.hasClass("risks-slide")?(a.find(".risks-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!1),c.find(".slide-next").prop("disabled",!1),c.find(".slide-next").css("display","inline"),d.css("display","none")):b.hasClass("treatments-slide")?(a.find(".treatments-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!1),c.find(".slide-next").prop("disabled",!1),c.find(".slide-next").css("display","inline"),d.css("display","none")):(a.find(".services-slide blockquote p").addClass("active"),c.find(".slide-prev").prop("disabled",!1),c.find(".slide-next").css("display","none"),d.css("display","inline  "))});var dssApp=angular.module("dssApp",["ngStorage","angular-flash.service","angular-flash.flash-alert-directive","ngDragDrop","angular-loading-bar","angularFileUpload","frapontillo.bootstrap-switch","nouislider"]).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]);$("body").on("mouseover",".list-group > .selected-asset",function(){$(this).find(".remove-asset").show(),$(this).find(".remove-bsoia-in-toia").show()}),$("body").on("mouseout",".list-group > .selected-asset",function(){$(this).find(".remove-asset").hide(),$(this).find(".remove-bsoia-in-toia").hide()}),$("body").on("mouseover",".list-group > .selected-risk",function(){$(this).find(".remove-risk").show()}),$("body").on("mouseout",".list-group > .selected-risk",function(){$(this).find(".remove-risk").hide()}),$("body").on("mouseover",".list-group > .dropzone",function(){$(this).find(".remove-bsoia-in-toia-asset").show()}),$("body").on("mouseout",".list-group > .dropzone",function(){$(this).find(".remove-bsoia-in-toia-asset").hide()}),$("body").on("mouseover",".list-group > .selected-treatment",function(){$(this).find(".remove-treatment").show()}),$("body").on("mouseout",".list-group > .selected-treatment",function(){$(this).find(".remove-treatment").hide()}),$('select[label="assets"]').select2({placeholder:"Select an asset"}),$('select[label="risks"]').select2({placeholder:"Select an asset"}),dssApp.controller("bsoiaController",["$scope","$rootScope","$localStorage","AssetsService","ArangoDBService","flash",function(a,b,c,d,e,f){a.bsoiaAssets=c.bsoiaAssets=[],a.bsoiaAssetsSelected=c.bsoiaAssetsSelected=d.getBSOIA(),a.addBsoiaAsset=function(a){d.addBSOIA(a)},a.removeBsoiaAsset=function(a){d.removeBSOIA(a)},a.$watch(function(){return d.getBSOIA()},function(){b.$broadcast("bsoiaChanged")},!0),e.getBSOIA(function(b,c){b?f.error="An error occurred while trying to fetch BSOIA assets from database":a.bsoiaAssets=c})}]),dssApp.controller("toiaController",["$scope","$rootScope","$localStorage","AssetsService","ArangoDBService","flash",function(a,b,c,d,e,f){a.toiaAssets=c.toiaAssets=[],a.toiaAssetsSelected=d.getTOIA(),a.bsoiaAssetsSelected=d.getBSOIA(),a.addToiaAsset=function(a){d.addTOIA(a)},a.removeToiaAsset=function(a){d.removeTOIA(a)},a.removeBsoiaFromToiaAsset=function(a,b){d.removeBSOIAfromTOIA(a.name,b.asset.name)},a.bsoiaDropped=function(a,b,c){d.existsBSOIAinTOIA(b.name,c.asset.name)?f.warn="BSOIA "+b.name+" already added in TOIA "+c.asset.name:(c.bsoiaRelations.push(b),d.updateTOIAbyName(c.asset.name,c))},a.isBsoiaEverUsed=function(a){return d.isBSOIALinked(a.name)},a.$watch(function(){return d.getTOIA()},function(){b.$broadcast("toiaChanged")},!0),e.getTOIA(function(b,c){b?f.error="An error occurred while trying to fetch BSOIA assets from database":a.toiaAssets=c})}]),dssApp.controller("taController",["$scope","AssetsService",function(a,b){a.taAssets=b.getTA(),a.removeTaAsset=function(a){b.removeTA(a)}}]),dssApp.controller("risksController",["$scope","$rootScope","ArangoDBService","flash","AssetsService","RisksService","$timeout","$interpolate",function(a,b,c,d,e,f){a.potentialRisks=[],a.risksSelected=f.getRisks(),a.multiple=!1,a.taAssets=e.getTA(),a.simpleRisksLikelihoodConsequence=f.getRisksLikelihoodConsequence(),a.multipleRisksLikelihoodConsequence=f.getRisksTALikelihoodConsequence();var g={VERY_LOW:{"class":"risk-very-low",name:"Very low"},LOW:{"class":"risk-low",name:"Low"},NORMAL:{"class":"risk-normal",name:"Normal"},HIGH:{"class":"risk-high",name:"High"},VERY_HIGH:{"class":"risk-very-high",name:"Very high"}},h=function(a){return 2>a?g.VERY_LOW.class:2==a||3==a?g.LOW.class:4==a||5==a||6==a?g.NORMAL.class:7==a||8==a?g.HIGH.class:a>8?g.VERY_HIGH.class:void 0},i=function(a){return 2>a?g.VERY_LOW.name:2==a||3==a?g.LOW.name:4==a||5==a||6==a?g.NORMAL.name:7==a||8==a?g.HIGH.name:a>8?g.VERY_HIGH.name:void 0},j=function(a){for(category in g)a.removeClass(g[category].class);return a};a.$watch(function(){return a.risksSelected},function(){b.$broadcast("risksSelectedChanged")},!0),a.$on("bsoiaChanged",function(){c.getPotentialRisks(function(b,c){if(b)d.error="Some error occurred when trying to compute potential risks after selected BSOIA changed";else{var e=[],f=[];_.each(c._documents,function(a){-1===e.indexOf(a.destination.name)&&(e.push(a.destination.name),f.push(a))}),a.potentialRisks=f}})}),a.$on("toiaChanged",function(){c.getPotentialRisks(function(b,c){if(b)d.error="Some error occurred when trying to compute potential risks after selected TOIA changed";else{var e=[],f=[];_.each(c._documents,function(a){-1===e.indexOf(a.destination.name)&&(e.push(a.destination.name),f.push(a))}),a.potentialRisks=f}})}),a.toggleActivation=function(){if(a.multiple){if(0==a.taAssets.length)return d.warn="You can't define risks per each tangible asset since you did not specify any of them",void(a.multiple=!1);a.multiple=!0}},a.$watch("taAssets",function(b,c){0==b.length&&(a.multiple=!1);var d=[],e=[];_.each(c,function(a){var c=!1;_.each(b,function(b){b.cloudResource._serviceName==a.cloudResource._serviceName&&(c=!0)}),c||d.push(a.cloudResource._serviceName)}),_.each(b,function(a){var b=!1;_.each(c,function(c){c.cloudResource._serviceName==a.cloudResource._serviceName&&(b=!0)}),b||e.push(a.cloudResource._serviceName)}),_.each(d,function(a){f.removeRiskTALikelihoodConsequence(a)}),_.each(e,function(b){_.each(a.risksSelected,function(c){var d=a.$eval("{"+c.destination.attributes+"}");f.addRiskTALikelihood(c.destination.name,b,d.start),f.addRiskTAConsequence(c.destination.name,b,d.start)})}),a.taAssets=b},!0),a.$watch("risksSelected",function(b,c){var d=[],e=[];_.each(c,function(a){var c=!1;_.each(b,function(b){b.destination.name==a.destination.name&&(c=!0)}),c||d.push(a.destination.name)}),_.each(b,function(b){var d=!1;if(_.each(c,function(a){a.destination.name==b.destination.name&&(d=!0)}),!d){var f=a.$eval("{"+b.destination.attributes+"}");e.push({name:b.destination.name,value:f.start})}}),_.each(d,function(a){f.removeRiskLikelihoodConsequence(a)}),_.each(e,function(b){f.addRiskLikelihood(b.name,b.value),f.addRiskConsequence(b.name,b.value),_.each(a.taAssets,function(a){f.addRiskTALikelihood(b.name,a.cloudResource._serviceName,b.value),f.addRiskTAConsequence(b.name,a.cloudResource._serviceName,b.value)})}),a.risksSelected=b},!0),a.addRisk=function(a){f.addRisk(a)},a.removeRisk=function(a){f.removeRisk(a)},a.$on("sliderValueChanged",function(b,c){var e=c.value;j(c.slider.children().first()).addClass(h(e)).text(i(e));var g=c.slider.data("hash-key"),k=g.split("_");if(k.length<2)return void(d.error="Incorrect hash key for slider value!");var l=k[0];if(a.multiple){var m=k[1],n=k[2];"likelihood"==n?f.addRiskTALikelihood(l,m,e):f.addRiskTAConsequence(l,m,e)}else{var n=k[1];"likelihood"==n?f.addRiskLikelihood(l,e):f.addRiskConsequence(l,e)}})}]),dssApp.controller("treatmentsController",["$scope","ArangoDBService","TreatmentsService","flash","$timeout",function(a,b,c,d){a.potentialTreatments=[],a.treatmentsSelected=c.getTreatments(),a.treatmentValues=c.getTreatmentsValues(),a.$on("risksSelectedChanged",function(){b.getPotentialTreatments(function(b,c){if(b)d.error="Some error occurred whehn trying to compute potential treatments after selected risks changed";else{var e=[],f=[];_.each(c._documents,function(a){-1===e.indexOf(a.destination.name)&&(e.push(a.destination.name),f.push(a))}),a.potentialTreatments=f}})}),a.$watch(function(){return a.treatmentsSelected},function(b,d){var e=[];_.each(d,function(a){var c=!1;_.each(b,function(b){b.destination.name==a.destination.name&&(c=!0)}),c||e.push(a.destination.name)}),_.each(e,function(a){c.removeTreatmentValue(a)}),a.treatmentsSelected=b},!0),a.$watch(function(){return a.treatmentValues},function(a,b){console.log("old",b),console.log("new",a)},!0),a.$on("treatmentValueChanged",function(a,b){c.addTreatmentValue(b.name,b.value)}),a.addTreatment=function(a){c.addTreatment(a)},a.removeTreatment=function(a){c.removeTreatment(a)}}]);var dssApp=angular.module("dssApp",["angular-flash.service","angular-flash.flash-alert-directive"]);dssApp.controller("crudController",["$scope","ArangoDBService","$http",function(a,b){a.providerData={},a.metricData={},a.serviceData={},b.getAll("provider",function(b,c){a.providers=c}),a.metricsValues={},a.$watch("metricsValues",function(a){console.log(a)},!0),b.getAll("metric",function(b,c){a.metrics=c}),a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showServicePanel=!0,a.showMetricPanel=!1,a.showProviderPanel=!1,a.switchPanel=function(b){switch(b){case"asset":a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showServicePanel=!1,a.showProviderPanel=!1,a.showMetricPanel=!1,a.showAssetPanel=!0;break;case"risk":a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showServicePanel=!1,a.showProviderPanel=!1,a.showMetricPanel=!1,a.showAssetPanel=!1,a.showRiskPanel=!0;break;case"treatment":a.showCharacteristicPanel=!1,a.showServicePanel=!1,a.showProviderPanel=!1,a.showMetricPanel=!1,a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!0;break;case"characteristic":a.showServicePanel=!1,a.showProviderPanel=!1,a.showMetricPanel=!1,a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!0;break;case"metric":a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showServicePanel=!1,a.showProviderPanel=!1,a.showMetricPanel=!0;break;case"provider":a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showServicePanel=!1,a.showMetricPanel=!1,a.showProviderPanel=!0;break;case"service":default:a.showAssetPanel=!1,a.showRiskPanel=!1,a.showTreatmentPanel=!1,a.showCharacteristicPanel=!1,a.showMetricPanel=!1,a.showProviderPanel=!1,a.showServicePanel=!0}},a.maxYear=(new Date).getFullYear(),a.isValidObject=function(a){try{var b=JSON.parse(a)}catch(c){return!1}return"object"==typeof b},a.saveForm=function(c,d){switch(c){case"service":{({name:d.name,type:"service",serivceType:d.cloudType,metrics:a.metricsValues})}b.save("service",d).then(function(){a.serviceData={},a.metricsValues={}}).fail(function(b){a.error=b});break;case"metric":d.type="metric",b.save("metric",d).then(function(){a.metricData={}}).fail(function(b){a.error=b});break;case"provider":d.type="provider",b.save("provider",d).then(function(){a.providerData={}}).fail(function(b){a.error=b})}}}]),dssApp.controller("mainController",["$scope","$upload","flash","AssetsService",function(a,b,c,d){var e=(new FileReader,new X2JS);a.clearSelection=function(){$localStorage.bsoiaAssetsSelected=$rootScope.bsoiaAssetsSelected=[],$localStorage.toiaAssetsSelected=$rootScope.toiaAssetsSelected=[],$localStorage.risksSelected=$rootScope.risksSelected=[],$localStorage.treatmentsSelected=$rootScope.treatmentsSelected=[]},a.saveSessionFile=function(a){var b=angular.element(a.target);b.attr({download:"DSS_Session.json",href:"data:application/json;charset=utf-8,"+encodeURI(JSON.stringify($localStorage)),target:"_blank"})},a.uploadSessionFile=function(){$("#uploadSessionFile").trigger("click")},a.loadLocalSessionContent=function(a){if(dssApp.isJSON(a)){var b=JSON.parse(a);$localStorage.assetsSelected=$rootScope.assetsSelected=b.assetsSelected,$localStorage.risksSelected=$rootScope.risksSelected=b.risksSelected,$localStorage.requirementsSelected=$rootScope.requirementsSelected=b.requirementsSelected}},a.showFileUploadDialog=function(a){$(a).trigger("click")},a.onFileSelect=function(a){var b=a[0];null!==b&&"undefined"!=typeof b?d.loadResourcesFromXML(b).then(function(a){var b=e.xml_str2json(a).resourceModelExtension.resourceContainer;_.each(b,function(a){d.addTA(a)})}):c.error="Some error occurred while trying to upload your requirements",jQuery("#cloud-descriptor-file-selector").get(0).reset()}}]),dssApp.service("AssetsService",["flash","$q","$rootScope",function(a,b){var c=[],d=[],e=[];this.addBSOIA=function(b){if(null===b||"undefined"==typeof b)return void(a.warn="No BSOIA was selected");var d=c.filter(function(a){return a.name===b.name}).length>0;d?a.warn="This asset has been already added!":c.push(b)},this.removeBSOIA=function(a){var b=-1;_.each(c,function(c,d){c.name==a.name&&(b=d)}),b>=0&&c.splice(b,1)},this.getBSOIA=function(){return c},this.addTOIA=function(b){if(null===b||"undefined"==typeof b)return void(a.warn="No TOIA was selected");var c=d.filter(function(a){return a.asset.name===b.name}).length>0;c?a.warn="This asset has been already added!":d.push({asset:b,bsoiaRelations:[]})},this.removeTOIA=function(a){var b=-1;_.each(d,function(c,d){c.asset.name==a.asset.name&&(b=d)}),b>=0&&d.splice(b,1)},this.getTOIA=function(){return d},this.existsTOIAByName=function(a){d.filter(function(b){return b.name==a}).length>0},this.existsBSOIAinTOIA=function(a,b){var c=d.filter(function(a){return a.asset.name==b});return c.length<1?!1:c[0].bsoiaRelations.filter(function(b){return b.name==a}).length>0},this.removeBSOIAfromTOIA=function(b,c){var e=-1;if(_.each(d,function(a,b){a.asset.name==c&&(e=b)}),0>e)return void(a.error=c+" does not exist");var f=-1;_.each(d[e].bsoiaRelations,function(a,c){a.name==b&&(f=c)}),f>=0&&d[e].bsoiaRelations.splice(f,1)},this.isBSOIALinked=function(a){return d.filter(function(b){return b.bsoiaRelations.filter(function(b){return b.name==a}).length>0}).length>0},this.updateTOIAbyName=function(a,b){var c=-1;_.each(d,function(b,d){b.name==a&&(c=d)}),c>=0&&(d[c]=b)},this.addTA=function(b){if(null===b||"undefined"==typeof b)a.warn="No TA were selected";else{var c=e.filter(function(a){return a._id==b._id}).length>0;c?a.warn="This asset has been already added":e.push(b)}},this.removeTA=function(a){var b=-1;_.each(e,function(c,d){c._id==a._id&&(b=d)}),b>=0&&e.splice(b,1)},this.getTA=function(){return e},this.loadResourcesFromXML=function(a){{var c=new FileReader,d=b.defer();c.readAsText(a)}return c.onload=function(){d.resolve(c.result)},d.promise}}]),dssApp.service("RisksService",["flash",function(a){var b=[],c={},d={};this.addRisk=function(c){if(null===c||"undefined"==typeof c)a.warn="No risk was selected";else{var d=b.filter(function(a){return c.destination.name==a.destination.name}).length>0;d?a.warn="This risk has been already added":b.push(c)}},this.removeRisk=function(a){var c=-1;_.each(b,function(b,d){a.destination.name==b.destination.name&&(c=d)}),c>=0&&b.splice(c,1)},this.getRisks=function(){return b},this.addRiskLikelihood=function(a,b){c[a+"_likelihood"]=parseInt(b)},this.removeRiskLikelihoodConsequence=function(a){var b=new RegExp(a+"[\\w\\s]*","i");for(key in c)b.exec(key)&&delete c[key];for(key in d)b.exec(key)&&delete d[key]},this.addRiskConsequence=function(a,b){c[a+"_consequence"]=parseInt(b)},this.addRiskTALikelihood=function(a,b,c){d[a+"_"+b+"_likelihood"]=parseInt(c)},this.addRiskTAConsequence=function(a,b,c){d[a+"_"+b+"_consequence"]=parseInt(c)},this.removeRiskTALikelihoodConsequence=function(a){var b=new RegExp("[\\w\\s]+_"+a+"_[\\w\\s]+","i");for(key in d)b.exec(key)&&delete d[key]},this.getRisksLikelihoodConsequence=function(){return c},this.getRisksTALikelihoodConsequence=function(){return d}}]),dssApp.service("ArangoDBService",["$http","$q","AssetsService","RisksService",function(a,b,c,d){var e="http://localhost:8529/_db/dss/dss/",f={getUrl:function(a){return e+"crud/nodes/"+a},getBSOIA:function(){return e+"crud/nodes/bsoia"},getTOIA:function(){return e+"crud/nodes/toia"},getRisks:function(){return e+"crud/nodes/risk"},getTreatments:function(){return e+"crud/nodes/treatment"},getPotentialRisks:function(a,b){var c=firstToia=!0,d=e+"graph/potentialRisks?";return _.each(a,function(a){c?(c=!1,d+="bsoias="+a.name):d+=","+a.name}),_.each(b,function(a){firstToia?(firstToia=!1,d+="&toias="+a.asset.name):d+=","+a.asset.name}),d},getPotentialTreatments:function(a){var b=!0,c=e+"graph/potentialTreatments?";return _.each(a,function(a){b?(b=!1,c+="risks="+a.destination.name):c+=","+a.destination.name}),c}};this.getBSOIA=function(b){a({method:"GET",url:f.getBSOIA()}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getTOIA=function(b){a({method:"GET",url:f.getTOIA()}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getRisks=function(b){a({method:"GET",url:f.getRisks()}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getTreatments=function(b){a({method:"GET",url:f.getTreatments()}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getPotentialRisks=function(b){a({method:"GET",url:f.getPotentialRisks(c.getBSOIA(),c.getTA())}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getPotentialTreatments=function(b){a({method:"GET",url:f.getPotentialTreatments(d.getRisks())}).success(function(a){b(null,a)}).error(function(a){b(a,null)})},this.getAll=function(b,c){a.get(f.getUrl(b)).success(function(a){c(null,a)}).error(function(a){c(a,null)})},this.save=function(c,d){var e=b.defer();return a.post(f.getUrl(c),d).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise},this.update=function(c,d){var e=b.defer();return a.post(f.getUrl(c),d).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise}}]),dssApp.service("TreatmentsService",["flash",function(a){var b=[],c={};this.addTreatment=function(c){if(null===c||"undefined"==typeof c)a.warn="No treatment was selected";else{var d=b.filter(function(a){return c.destination.name==a.destination.name}).length>0;d?a.warn="This treatment has been already added":b.push(c)}},this.removeTreatment=function(a){var c=-1;_.each(b,function(b,d){a.destination.name==b.destination.name&&(c=d)}),c>=0&&b.splice(c,1)},this.getTreatments=function(){return b},this.addTreatmentValue=function(a,b){console.log("adding treatment value",a,b),c[a]=b},this.removeTreatmentValue=function(a){console.log("removing treatment value",a),delete c[a]},this.getTreatmentsValues=function(){return c}}]),dssApp.filter("capitalize",function(){return function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),dssApp.filter("replaceSpacesWithDash",function(){return function(a){return a.replace(/\ /g,"_")}}),dssApp.filter("replaceDotWithDash",function(){return function(a){return a.replace(/\./g,"_")}}),dssApp.filter("replaceDashWithSpace",function(){return function(a){return a.replace(/_/g," ")}}),dssApp.filter("replaceDashWithDot",function(){return function(a){return a.replace(/_/g,".")}}),dssApp.filter("unique",function(){return function(a,b){var c,d;return b===!1?a:((b||angular.isUndefined(b))&&angular.isArray(a)&&(d=[],c=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a},angular.forEach(a,function(b){var e,f,g=!1;for(e=0,f=d.length;f>e;e++){var h=d[e];if(angular.equals(c(h),c(b))){g=!0;break}}g||d.push(b),a=d})),a)}}),dssApp.directive("onReadFile",["$parse",function(a){return{restrict:"A",scope:!1,link:function(b,c,d){var e=a(d.onReadFile);c.on("change",function(a){var c=new FileReader;c.onload=function(a){b.$apply(function(){e(b,{$fileContent:a.target.result})})},c.readAsText((a.srcElement||a.target).files[0])})}}}]),dssApp.isJSON=function(a){if("string"==typeof a){try{JSON.parse(a)}catch(b){return!1}return!0}return!1},dssApp.directive("onRepeatDone",function(){return{restrict:"A",link:function(a,b){a.$emit("repeatDone",b)}}}),dssApp.directive("onRisksType",["$timeout",function(a){return{restrict:"A",scope:!1,link:function(b,c){a(function(){b.$emit("sliderValueChanged",{slider:$(c.children().first()),value:$(c.children().first()).val()})},10)}}}]),dssApp.directive("treatRadio",function(){return{restrict:"E",scope:{item:"="},templateUrl:"partials/treatments/treatments-radio.html",link:function(a){a.options=a.$eval("{"+a.item.destination.options+"}"),a.aux="",a.change=function(b){var c=null;for(optionValue in a.options)if(a.options[optionValue]==b){c=optionValue;break}c&&a.$emit("treatmentValueChanged",{name:a.item.destination.name,value:c})}}}}),dssApp.directive("treatSelect",function(){return{restrict:"E",scope:{item:"="},templateUrl:"partials/treatments/treatments-select.html",link:function(a){a.options=a.$eval("{"+a.item.destination.options+"}"),a.change=function(b){var c=null;for(optionValue in a.options)if(a.options[optionValue]==b){c=optionValue;break}c&&a.$emit("treatmentValueChanged",{name:a.item.destination.name,value:c})}}}});
//# sourceMappingURL=app.min.map